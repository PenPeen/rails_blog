"""
Autogenerated return type of CreateUserMutation.
"""
type CreateUserMutationPayload {
  message: String!
  token: String
  user: User
}

"""
An ISO 8601-encoded datetime
"""
scalar ISO8601DateTime @specifiedBy(url: "https://tools.ietf.org/html/rfc3339")

"""
Autogenerated return type of LoginMutation.
"""
type LoginMutationPayload {
  token: String
  user: User
}

"""
Autogenerated return type of LogoutMutation.
"""
type LogoutMutationPayload {
  success: Boolean!
}

type Mutation {
  createUser(userInput: UserInputType!): CreateUserMutationPayload
  login(email: String!, password: String!): LoginMutationPayload
  logout: LogoutMutationPayload
  updateUserProfile(
    """
    Parameters for UpdateUserProfileMutation
    """
    input: UpdateUserProfileMutationInput!
  ): UpdateUserProfileMutationPayload
}

type Pagination {
  currentPage: Int
  limitValue: Int
  totalCount: Int
  totalPages: Int
}

type Post {
  content: String!
  createdAt: ISO8601DateTime!
  id: ID!
  published: Boolean
  thumbnailUrl: String
  title: String!
  topImage: String
  updatedAt: ISO8601DateTime!
  user: User!
  userId: Int!
}

type Posts {
  pagination: Pagination
  posts: [Post!]
}

"""
Published posts related fields
"""
type Published {
  """
  Fetches a published post by ID
  """
  post(id: ID!): Post!

  """
  Fetches a list of published posts with pagination
  """
  posts(page: Int = 1, perPage: Int = 15): Posts!

  """
  Searches published posts by title
  """
  searchPosts(page: Int = 1, perPage: Int = 15, title: String!): Posts!
}

type Query {
  """
  Fetches the current logged in user
  """
  currentUser: User

  """
  Fetches a list of posts created by the current user
  """
  myPosts(page: Int = 1, perPage: Int = 15): Posts!

  """
  Access to published posts functionality
  """
  published: Published!
}

"""
Autogenerated input type of UpdateUserProfileMutation
"""
input UpdateUserProfileMutationInput {
  """
  A unique identifier for the client performing the mutation.
  """
  clientMutationId: String
  userProfileInput: UserProfileInputType!
}

"""
Autogenerated return type of UpdateUserProfileMutation.
"""
type UpdateUserProfileMutationPayload {
  """
  A unique identifier for the client performing the mutation.
  """
  clientMutationId: String
  message: String!
  user: User
}

type User {
  createdAt: ISO8601DateTime!
  email: String!
  id: ID!
  name: String!
  posts: [Post!]
  updatedAt: ISO8601DateTime!
}

"""
Attributes for creating a user
"""
input UserInputType {
  email: String!
  name: String!
  password: String!
}

"""
Attributes for updating a user profile
"""
input UserProfileInputType {
  name: String!

  """
  Base64エンコードされたプロフィール画像
  """
  profile: String
}
